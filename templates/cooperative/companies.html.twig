{% extends 'layout.html.twig' %}

{% block title %}{{ parent () }} | Co-oZ - Entreprises{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('companies') }}
{% endblock %}

{% block body %}
    <main class="companies">
        <div class="header mt-0 d-flex align-items-center justify-content-center">
            <h1 class="text-center text-light reveal-1">Club Co-oZ</h1>
        </div>
        <section>
            <h2 class="text-center text-secondary reveal-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                     class="bi bi-patch-check-fill" viewBox="0 0 16 16">
                    <path d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01-.622-.636zm.287 5.984l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708z"/>
                </svg>
                Les entreprises partenaires
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                     class="bi bi-patch-check-fill" viewBox="0 0 16 16">
                    <path d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01-.622-.636zm.287 5.984l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708z"/>
                </svg>
            </h2>
            <div class="container-fluid mb-5">
                <div class="row d-flex justify-content-center mb-5">
                    <div class="col-8 mb-2 reveal-3">
                        {{ form_start(form) }}
                        {{ form_row(form.input, {'attr': {'class': 'text-primary'}}) }}
                        {{ form_row(form.competences) }}

                        <button class="btn btn-outline-primary reveal-3">
                            <span class="pb-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                     class="bi bi-search" viewBox="0 0 16 16">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                </svg>
                            </span>
                            Rechercher
                        </button>
                        {{ form_end(form) }}
                    </div>
                </div>
                <div class="row mx-0 justify-content-center justify-content-xl-start row-companies px-4 pt-4 ml-3">
                    {% for company in companies %}
                        <div class="card reveal-3">
                            <img src="{{ asset('uploads/logos/' ~ company.logo) }}" class="logo img-fluid"
                                 alt="{{ company.name }}">

                            <div class="card-title my-3">
                                <h3 class="card-title text-center reveal-3">{{ company.name }}</h3>
                            </div>
                            <div class="card-body d-flex flex-column justify-content-between">
                                <p class="card-text text-justify">{{ company.abstract }}</p>
                                <p class="card-text">
                                    <span class="text-primary">Secteur d'activité : </span>
                                    {{ company.activity }}
                                </p>
                                <p class="text-primary card-text mb-1">Compétences : </p>
                                <div class="d-flex">
                                    {% for competence in company.competences %}
                                        <p class="badge badge-primary px-2 py-2 mx-2">
                                            {{ competence.name | capitalize }}
                                        </p>
                                    {% else %}
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                             fill="currentColor"
                                             class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                                        </svg>
                                        <p class="pl-2 reveal-3">Pas de compétence associée à cette entreprise</p>
                                    {% endfor %}
                                </div>
                                <a href="{{ path('cooperative_show', {'id' : company.id}) }}"
                                   class="button-yellow align-self-center text-center text-decoration-none rounded-pill my-4 px-3 py-2">
                                    <span class="text-center text-light mr-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                             fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                            <path d="M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                                        </svg>
                                    </span>
                                    En savoir plus
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <div class="col d-flex justify-content-center">
                         <span class="mr-3 text-primary">
                             <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"
                                  fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                         <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                         </svg>
                         </span>
                            Aucune entreprise trouvée
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    </main>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('intersection') }}
{% endblock %}
